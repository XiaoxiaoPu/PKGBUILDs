# Maintainer:  Xiaoxiao Pu <i@xiaoxiao.im>

pkgname=bochs-dbg
pkgver=2.6.2
pkgrel=1
pkgdesc="A portable x86 PC emulation software package with builtin debugger"
arch=('i686' 'x86_64')
url="http://bochs.sourceforge.net/"
license=('LGPL')
depends=('gtk2' 'libxpm')
provides=('bochs')
conflicts=('bochs')
source=("http://downloads.sourceforge.net/sourceforge/bochs/bochs-${pkgver}.tar.gz")
sha256sums=('d973b72b79a5de96ebe9337b8421f19dcd775dce16ed25a0232fa6d543a54b10')

build() {
	cd "${srcdir}/bochs-${pkgver}"
	export LIBS=-lpthread
	./configure --prefix=/usr --enable-debugger --enable-disasm
	make
}

package() {
	cd "${srcdir}/bochs-$pkgver"
	make DESTDIR="${pkgdir}" install
	install -D -m 644 .bochsrc "${pkgdir}/etc/bochsrc-sample.txt"
}